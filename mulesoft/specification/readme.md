## Pay.gov Experience API
#### What is Pay.gov

##### Background & Context

Pay.gov is the U.S. government's secure web-based collection portal for making payments to federal agencies. Managed by the U.S. Department of the Treasury's Bureau of the Fiscal Service, Pay.gov provides a standardized way to process collections for government agencies through various payment methods including credit cards, debit cards, and ACH (Automated Clearing House) direct debit. The Pay.gov about page describes the system aptly as, "a free and secure service that allows you to pay many, but not all, United States Government agencies." As the description implies, many U.S. Government agencies rely on Pay.gov to collect and make payments for their day-to-day operations. As such Pay.gov becomes a critical part of the overall architecture for many agencies use cases.

##### Interacting with Pay.gov

At a high level there are two _categories_ of interactions with Pay.gov. Here we will refer to them as "user-interface based" vs "web-services based". The first category, "user-interface", encompass the interactions with Pay.gov that take place via a user interface. Pay.gov provides the ability for an agency to either host a form on their own website or for a user during their payment process to be redirected to a form hosted on the Pay.gov website. The second category, "web-services based", encompases interactions that take place via system-system webservices.  Pay.gov publishes a suite of web services that allow a user to accomplish various tasks. As of version 8.5 of Pay.gov some of these web services include:

1. Trusted Collection Services - a suite of web services that allow agencies to non-interactively submit transactions, either one-at-a-time or in batches, depending on the service used; retrieve the status of submitted batches, and submit queries that retrieve transaction information.
2. eBilling Online Web Service - provides a way for agencies to create ebills using a system-to-system interface
3. ACH Credit Web Service - provides a way for agencies to create ACH Credit transactions on behalf of their customers through a system-to-system interface.
4. Query Web Service - enables agency customers to non-interactively make requests for detailed information on one or more transactions. 

This accelerator mainly touches upon the services provided within the suite of Trusted Collection Services (TCS).

#### How to use this API

###### Integrating with Pay.gov

1. Firstly get in contact with Pay.gov. See: [https://www.fiscal.treasury.gov/Pay.gov/getting-started.html](https://www.fiscal.treasury.gov/Pay.gov/getting-started.html). This enrollment step is mandatory before getting any access to even technical documentation about _how_ to integrate with Pay.gov. Pay.gov does not publically publish the technical documentation required for a user to be able to connect and integrate with their envrionments.
2. During this enrollment step the Pay.gov team will provide the agencyID as well as the necessary certificates needed for authentication with the Pay.gov web services.
3. Work with the Pay.gov technical team to define custom fields/implement their process
4. Test and deploy

##### API Overview
_Important Disclaimer: This asset is an __**experience**__ API for Pay.gov, meaning it provides an abstraction atop a Pay.gov web services integration implementation. As stated in the previous section there is no published specification for the Pay.gov web services and as such this API is not meant to provide exact field names, payload data, or be a drop-in implementation for Pay.gov web services. Instead this API can be used to bootstrap the Pay.gov integration process by defining some common fields that are likely need to complete the transactions that this API defines._

This API provides 3 Endpoints:

1. Initiate Payment
2. Complete Payment
3. Get Payment Details

These 3 endpoints represent the steps required to complete a basic payment transaction a client application might make with Pay.gov.

```
Initiate Payment
```

The initiate payment endpoint starts the Pay.gov payment process. This endpoint posts payment information to Pay.gov and returns with a token generated by Pay.gov that is used in subsequent calls to complete and lookup the payment.

```
Complete Payment
```

The complete payment endpoint sends the previously generated token along with an client generated tracking ID to complete processing of a given payment.

```
Get Payment Details
```

The get payment details endpoint retrieves information and status of a given payment.

##### Contributions
Noor Ahmad, Principal Solutions Engineer
Gianfranco Leto, Technical Consultant
Raghu Vanavasam, Director, Technical Consulting

